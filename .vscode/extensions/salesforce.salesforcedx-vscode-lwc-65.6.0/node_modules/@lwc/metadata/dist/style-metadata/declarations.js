'use strict';

var postcssValueParser = require('postcss-value-parser');
var utils = require('./utils.js');

function _interopDefaultCompat (e) { return e && typeof e === 'object' && 'default' in e ? e : { default: e }; }

var postcssValueParser__default = /*#__PURE__*/_interopDefaultCompat(postcssValueParser);

// Copyright (c) 2022, Salesforce, Inc.,
// All rights reserved.
// For full license text, see the LICENSE.txt file
function collectDeclarations(result, root) {
    root.walkDecls((decl) => {
        const { prop, value, source } = decl;
        const parsedValue = postcssValueParser__default.default(value);
        const startOffset = source.start.offset;
        // The value offset from the start of the declaration node
        const valueOffset = utils.getCssValueOffset(decl);
        result.declarations.push({
            prop: {
                name: prop,
                location: utils.getReferenceLocation(source, startOffset, prop.length),
            },
            value: {
                nodes: parsedValue.nodes,
                location: utils.getReferenceLocation(source, startOffset + valueOffset, value.length),
            },
        });
    });
}

exports.collectDeclarations = collectDeclarations;
//# sourceMappingURL=declarations.js.map
